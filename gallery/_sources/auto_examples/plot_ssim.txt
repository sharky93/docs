.. _example_plot_ssim.py:


===========================
Structural similarity index
===========================

When comparing images, the mean squared error (MSE)--while simple to
implement--is not highly indicative of perceived similarity.  Structural
similarity aims to address this shortcoming by taking texture into account
[1]_, [2]_.

The example shows two modifications of the input image, each with the same MSE,
but with very different mean structural similarity indices.

.. [1] Zhou Wang; Bovik, A.C.; ,"Mean squared error: Love it or leave it? A new
       look at Signal Fidelity Measures," Signal Processing Magazine, IEEE,
       vol. 26, no. 1, pp. 98-117, Jan. 2009.

.. [2] Z. Wang, A. C. Bovik, H. R. Sheikh and E. P. Simoncelli, "Image quality
       assessment: From error visibility to structural similarity," IEEE
       Transactions on Image Processing, vol. 13, no. 4, pp. 600-612,
       Apr. 2004.


.. image:: images/plot_ssim_1.png
    :align: center


.. raw:: html
    
    <p id="controls">
        <button type="button" class="btn btn-default btn-small" id="editcode">
            <i class="icon-edit"></i>
        </button>
    </p>

.. literalinclude:: plot_ssim.py
    :lines: 24-


.. raw:: html

    <p id="run_btn">
        <button type="button" class="btn btn-default btn-lg" id="runcode">
            <i class="icon-play"></i> Run
        </button>
        <button type="button" class="btn btn-default btn-lg" id="reload">
            <i class="icon-refresh"></i>
        </button>
        <img id="loading" src="../_static/ajax-loader.gif"/>
    </p>

.. raw:: html

    <p>
        <div class="alert alert-success" id="success-message"></div>
        <div class="alert alert-error" id="error-message"></div>
        <div class="all-output">
            <p class="stdout-group">
                <i class="icon-info-sign"></i> <u>STDOUT</u>
            </p>
            <pre id="stdout"></pre>
            <hr class="stdout-group">
            <p class="stderr-group">
                <i class="icon-remove-sign"></i> <u>STDERR</u>
            </p>
            <pre id="stderr"></pre>
            <hr class="stderr-group">
        </div>
    </p>


**Python source code:** :download:`download <plot_ssim.py>`
(generated using ``skimage`` |version|)



**IPython Notebook:** :download:`download <./notebook/plot_ssim.ipynb>`
(generated using ``skimage`` |version|)


.. raw:: html

    <div class="tobehidden">aW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBtYXRwbG90bGliCmltcG9ydCBtYXRwbG90bGliLnB5cGxvdCBhcyBwbHQKCmZyb20gc2tpbWFnZSBpbXBvcnQgZGF0YSwgaW1nX2FzX2Zsb2F0CmZyb20gc2tpbWFnZS5tZWFzdXJlIGltcG9ydCBzdHJ1Y3R1cmFsX3NpbWlsYXJpdHkgYXMgc3NpbQoKCm1hdHBsb3RsaWIucmNQYXJhbXNbJ2ZvbnQuc2l6ZSddID0gOQoKCmltZyA9IGltZ19hc19mbG9hdChkYXRhLmNhbWVyYSgpKQpyb3dzLCBjb2xzID0gaW1nLnNoYXBlCgpub2lzZSA9IG5wLm9uZXNfbGlrZShpbWcpICogMC4yICogKGltZy5tYXgoKSAtIGltZy5taW4oKSkKbm9pc2VbbnAucmFuZG9tLnJhbmRvbShzaXplPW5vaXNlLnNoYXBlKSA+IDAuNV0gKj0gLTEKCgpkZWYgbXNlKHgsIHkpOgogICAgcmV0dXJuIG5wLmxpbmFsZy5ub3JtKHggLSB5KQoKaW1nX25vaXNlID0gaW1nICsgbm9pc2UKaW1nX2NvbnN0ID0gaW1nICsgYWJzKG5vaXNlKQoKZmlnLCAoYXgwLCBheDEsIGF4MikgPSBwbHQuc3VicGxvdHMobnJvd3M9MSwgbmNvbHM9MywgZmlnc2l6ZT0oOCwgNCkpCgptc2Vfbm9uZSA9IG1zZShpbWcsIGltZykKc3NpbV9ub25lID0gc3NpbShpbWcsIGltZywgZHluYW1pY19yYW5nZT1pbWcubWF4KCkgLSBpbWcubWluKCkpCgptc2Vfbm9pc2UgPSBtc2UoaW1nLCBpbWdfbm9pc2UpCnNzaW1fbm9pc2UgPSBzc2ltKGltZywgaW1nX25vaXNlLCBkeW5hbWljX3JhbmdlPWltZ19jb25zdC5tYXgoKSAtIGltZ19jb25zdC5taW4oKSkKCm1zZV9jb25zdCA9IG1zZShpbWcsIGltZ19jb25zdCkKc3NpbV9jb25zdCA9IHNzaW0oaW1nLCBpbWdfY29uc3QsIGR5bmFtaWNfcmFuZ2U9aW1nX25vaXNlLm1heCgpIC0gaW1nX25vaXNlLm1pbigpKQoKbGFiZWwgPSAnTVNFOiAlMi5mLCBTU0lNOiAlLjJmJwoKYXgwLmltc2hvdyhpbWcsIGNtYXA9cGx0LmNtLmdyYXksIHZtaW49MCwgdm1heD0xKQpheDAuc2V0X3hsYWJlbChsYWJlbCAlIChtc2Vfbm9uZSwgc3NpbV9ub25lKSkKYXgwLnNldF90aXRsZSgnT3JpZ2luYWwgaW1hZ2UnKQoKYXgxLmltc2hvdyhpbWdfbm9pc2UsIGNtYXA9cGx0LmNtLmdyYXksIHZtaW49MCwgdm1heD0xKQpheDEuc2V0X3hsYWJlbChsYWJlbCAlIChtc2Vfbm9pc2UsIHNzaW1fbm9pc2UpKQpheDEuc2V0X3RpdGxlKCdJbWFnZSB3aXRoIG5vaXNlJykKCmF4Mi5pbXNob3coaW1nX2NvbnN0LCBjbWFwPXBsdC5jbS5ncmF5LCB2bWluPTAsIHZtYXg9MSkKYXgyLnNldF94bGFiZWwobGFiZWwgJSAobXNlX2NvbnN0LCBzc2ltX2NvbnN0KSkKYXgyLnNldF90aXRsZSgnSW1hZ2UgcGx1cyBjb25zdGFudCcpCgpwbHQuc2hvdygp</div>
