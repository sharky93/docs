.. _example_plot_restoration.py:


=====================
Deconvolution of Lena
=====================

In this example, we deconvolve a noisy version of Lena using Wiener
and unsupervised Wiener algorithms. This algorithms are based on
linear models that can't restore sharp edge as much as non-linear
methods (like TV restoration) but are much faster.

Wiener filter
-------------
The inverse filter based on the PSF (Point Spread Function),
the prior regularisation (penalisation of high frequency) and the
tradeoff between the data and prior adequacy. The regularization
parameter must be hand tuned.

Unsupervised Wiener
-------------------
This algorithm has a self-tuned regularisation parameters based on
data learning. This is not common and based on the following
publication. The algorithm is based on a iterative Gibbs sampler that
draw alternatively samples of posterior conditionnal law of the image,
the noise power and the image frequency power.

.. [1] François Orieux, Jean-François Giovannelli, and Thomas
       Rodet, "Bayesian estimation of regularization and point
       spread function parameters for Wiener-Hunt deconvolution",
       J. Opt. Soc. Am. A 27, 1593-1607 (2010)

.. image:: images/plot_restoration_1.png
    :align: center


.. raw:: html
    
    <p id="controls">
        <button type="button" class="btn btn-default btn-small editcode">
            <i class="icon-edit"></i>
        </button>
    </p>

.. literalinclude:: plot_restoration.py
    :lines: 32-


.. raw:: html

    <p class="run_btn">
        <button type="button" class="btn btn-default btn-lg runcode">
            <i class="icon-play"></i> Run
        </button>
        <img class="loading" src="../_static/ajax-loader.gif"/>
    </p>

.. raw:: html

    <p id="revert_btn">
        <button type="button" class="btn btn-default btn-lg" id="reload">
            <i class="icon-refresh"></i>
        </button>
    </p>

.. raw:: html

    <p>
        <div class="alert alert-success" id="success-message"></div>
        <div class="alert alert-error" id="error-message"></div>
        <div class="all-output">
            <p class="stdout-group">
                <i class="icon-info-sign"></i> <u>STDOUT</u>
            </p>
            <pre id="stdout"></pre>
            <hr class="stdout-group">
            <p class="stderr-group">
                <i class="icon-remove-sign"></i> <u>STDERR</u>
            </p>
            <pre id="stderr"></pre>
            <hr class="stderr-group">
        </div>
    </p>


**Python source code:** :download:`download <plot_restoration.py>`
(generated using ``skimage`` |version|)



**IPython Notebook:** :download:`download <./notebook/plot_restoration.ipynb>`
(generated using ``skimage`` |version|)


.. raw:: html

    <div class="tobehidden">IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0=</div>

.. raw:: html

    <div class="tobehidden">aW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBtYXRwbG90bGliLnB5cGxvdCBhcyBwbHQKCmZyb20gc2tpbWFnZSBpbXBvcnQgY29sb3IsIGRhdGEsIHJlc3RvcmF0aW9uCgpsZW5hID0gY29sb3IucmdiMmdyYXkoZGF0YS5sZW5hKCkpCmZyb20gc2NpcHkuc2lnbmFsIGltcG9ydCBjb252b2x2ZTJkIGFzIGNvbnYyCnBzZiA9IG5wLm9uZXMoKDUsIDUpKSAvIDI1CmxlbmEgPSBjb252MihsZW5hLCBwc2YsICdzYW1lJykKbGVuYSArPSAwLjEgKiBsZW5hLnN0ZCgpICogbnAucmFuZG9tLnN0YW5kYXJkX25vcm1hbChsZW5hLnNoYXBlKQoKZGVjb252b2x2ZWQsIF8gPSByZXN0b3JhdGlvbi51bnN1cGVydmlzZWRfd2llbmVyKGxlbmEsIHBzZikKCmZpZywgYXggPSBwbHQuc3VicGxvdHMobnJvd3M9MSwgbmNvbHM9MiwgZmlnc2l6ZT0oOCwgNSkpCgpwbHQuZ3JheSgpCgpheFswXS5pbXNob3cobGVuYSwgdm1pbj1kZWNvbnZvbHZlZC5taW4oKSwgdm1heD1kZWNvbnZvbHZlZC5tYXgoKSkKYXhbMF0uYXhpcygnb2ZmJykKYXhbMF0uc2V0X3RpdGxlKCdEYXRhJykKCmF4WzFdLmltc2hvdyhkZWNvbnZvbHZlZCkKYXhbMV0uYXhpcygnb2ZmJykKYXhbMV0uc2V0X3RpdGxlKCdTZWxmIHR1bmVkIHJlc3RvcmF0aW9uJykKCmZpZy5zdWJwbG90c19hZGp1c3Qod3NwYWNlPTAuMDIsIGhzcGFjZT0wLjIsCiAgICAgICAgICAgICAgICAgICAgdG9wPTAuOSwgYm90dG9tPTAuMDUsIGxlZnQ9MCwgcmlnaHQ9MSkKCnBsdC5zaG93KCk=</div>
