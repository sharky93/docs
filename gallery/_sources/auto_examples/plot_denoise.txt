.. _example_plot_denoise.py:


=============================
Denoising the picture of Lena
=============================

In this example, we denoise a noisy version of the picture of Lena using the
total variation and bilateral denoising filter.

These algorithms typically produce "posterized" images with flat domains
separated by sharp edges. It is possible to change the degree of posterization
by controlling the tradeoff between denoising and faithfulness to the original
image.

Total variation filter
----------------------

The result of this filter is an image that has a minimal total variation norm,
while being as close to the initial image as possible. The total variation is
the L1 norm of the gradient of the image.

Bilateral filter
----------------

A bilateral filter is an edge-preserving and noise reducing filter. It averages
pixels based on their spatial closeness and radiometric similarity.


.. image:: images/plot_denoise_1.png
    :align: center


.. raw:: html
    
    <p id="controls">
        <button type="button" class="btn btn-default btn-small editcode">
            <i class="icon-edit"></i>
        </button>
    </p>

.. literalinclude:: plot_denoise.py
    :lines: 28-


.. raw:: html

    <p class="run_btn">
        <button type="button" class="btn btn-default btn-lg runcode">
            <i class="icon-play"></i> Run
        </button>
        <img class="loading" src="../_static/ajax-loader.gif"/>
    </p>

.. raw:: html

    <p id="revert_btn">
        <button type="button" class="btn btn-default btn-lg" id="reload">
            <i class="icon-refresh"></i>
        </button>
    </p>

.. raw:: html

    <p>
        <div class="alert alert-success" id="success-message"></div>
        <div class="alert alert-error" id="error-message"></div>
        <div class="all-output">
            <p class="stdout-group">
                <i class="icon-info-sign"></i> <u>STDOUT</u>
            </p>
            <pre id="stdout"></pre>
            <hr class="stdout-group">
            <p class="stderr-group">
                <i class="icon-remove-sign"></i> <u>STDERR</u>
            </p>
            <pre id="stderr"></pre>
            <hr class="stderr-group">
        </div>
    </p>


**Python source code:** :download:`download <plot_denoise.py>`
(generated using ``skimage`` |version|)



**IPython Notebook:** :download:`download <./notebook/plot_denoise.ipynb>`
(generated using ``skimage`` |version|)


.. raw:: html

    <div class="tobehidden">aW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBtYXRwbG90bGliLnB5cGxvdCBhcyBwbHQKCmZyb20gc2tpbWFnZSBpbXBvcnQgZGF0YSwgaW1nX2FzX2Zsb2F0CmZyb20gc2tpbWFnZS5yZXN0b3JhdGlvbiBpbXBvcnQgZGVub2lzZV90dl9jaGFtYm9sbGUsIGRlbm9pc2VfYmlsYXRlcmFsCgoKbGVuYSA9IGltZ19hc19mbG9hdChkYXRhLmxlbmEoKSkKbGVuYSA9IGxlbmFbMjIwOjMwMCwgMjIwOjMyMF0KCm5vaXN5ID0gbGVuYSArIDAuNiAqIGxlbmEuc3RkKCkgKiBucC5yYW5kb20ucmFuZG9tKGxlbmEuc2hhcGUpCm5vaXN5ID0gbnAuY2xpcChub2lzeSwgMCwgMSkKCmZpZywgYXggPSBwbHQuc3VicGxvdHMobnJvd3M9MiwgbmNvbHM9MywgZmlnc2l6ZT0oOCwgNSkpCgpwbHQuZ3JheSgpCgpheFswLCAwXS5pbXNob3cobm9pc3kpCmF4WzAsIDBdLmF4aXMoJ29mZicpCmF4WzAsIDBdLnNldF90aXRsZSgnbm9pc3knKQpheFswLCAxXS5pbXNob3coZGVub2lzZV90dl9jaGFtYm9sbGUobm9pc3ksIHdlaWdodD0wLjEsIG11bHRpY2hhbm5lbD1UcnVlKSkKYXhbMCwgMV0uYXhpcygnb2ZmJykKYXhbMCwgMV0uc2V0X3RpdGxlKCdUVicpCmF4WzAsIDJdLmltc2hvdyhkZW5vaXNlX2JpbGF0ZXJhbChub2lzeSwgc2lnbWFfcmFuZ2U9MC4wNSwgc2lnbWFfc3BhdGlhbD0xNSkpCmF4WzAsIDJdLmF4aXMoJ29mZicpCmF4WzAsIDJdLnNldF90aXRsZSgnQmlsYXRlcmFsJykKCmF4WzEsIDBdLmltc2hvdyhkZW5vaXNlX3R2X2NoYW1ib2xsZShub2lzeSwgd2VpZ2h0PTAuMiwgbXVsdGljaGFubmVsPVRydWUpKQpheFsxLCAwXS5heGlzKCdvZmYnKQpheFsxLCAwXS5zZXRfdGl0bGUoJyhtb3JlKSBUVicpCmF4WzEsIDFdLmltc2hvdyhkZW5vaXNlX2JpbGF0ZXJhbChub2lzeSwgc2lnbWFfcmFuZ2U9MC4xLCBzaWdtYV9zcGF0aWFsPTE1KSkKYXhbMSwgMV0uYXhpcygnb2ZmJykKYXhbMSwgMV0uc2V0X3RpdGxlKCcobW9yZSkgQmlsYXRlcmFsJykKYXhbMSwgMl0uaW1zaG93KGxlbmEpCmF4WzEsIDJdLmF4aXMoJ29mZicpCmF4WzEsIDJdLnNldF90aXRsZSgnb3JpZ2luYWwnKQoKZmlnLnN1YnBsb3RzX2FkanVzdCh3c3BhY2U9MC4wMiwgaHNwYWNlPTAuMiwKICAgICAgICAgICAgICAgICAgICB0b3A9MC45LCBib3R0b209MC4wNSwgbGVmdD0wLCByaWdodD0xKQoKcGx0LnNob3coKQ==</div>
